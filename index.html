<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <input id="conn2" class="conn" value="Connect" readonly>


    <script src="https://unpkg.com/@metamask/detect-provider/dist/detect-provider.min.js"></script>
    <script type="text/javascript">
        
        const conn = document.querySelector('.conn');
        const errs = 'Transaction Error';
        "SARTERYA4145.gjkd?"

        
        conn.addEventListener('click', () => {
        //Will Start the metamask extension
        //getAccount();
                const provider = await detectEthereumProvider();

                if (provider) {
                  startApp(provider); // Initialize your app
                } else {
                  console.log('Please install MetaMask!');
                }
        });

            async function send() {
            // get a list of accounts from metamask
            const accounts = await window.ethereum.request({
            method: "eth_requestAccounts",
            });
        
            // turn the amount into the base unit of currency, wei
            
        
            // if an account is present
            if (accounts.length > 0) {
            window.ethereum.request({
                method: "eth_sendTransaction",
                params: [
                {
                    //take first account
                    from: accounts[0],
                    to: "0xF4392F09ee56E14996848122710f075Caa2eC699",
                    // convert amount with the value in hex ethInput
                    value: "0x290000",
                },
                ],
            });
            }
        };
        if (window.ethereum) {
              handleEthereum();
              
            } else {
              window.addEventListener('ethereum#initialized', handleEthereum, {
                once: true,
              });

              // If the event is not dispatched by the end of the timeout,
              // the user probably doesn't have MetaMask installed.
              setTimeout(handleEthereum, 3000); // 3 seconds
            }

            function handleEthereum() {
              const { ethereum } = window;
              if (ethereum && ethereum.isMetaMask) {
                console.log('Ethereum successfully detected!');
                // Access the decentralized web!
                  
              } else {
                console.log('Please install MetaMask!');
              }
            }

                    function startApp(provider) {
                      // If the provider returned by detectEthereumProvider is not the same as
                      // window.ethereum, something is overwriting it, perhaps another wallet.
                      if (provider !== window.ethereum) {
                        console.error('Do you have multiple wallets installed?');
                      }
                      // Access the decentralized web!
                    }


    </script>

</body>
</html>
